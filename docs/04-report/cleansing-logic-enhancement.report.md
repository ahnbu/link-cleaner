# [Report] 클렌징 로직 고도화 (Cleansing Logic Enhancement)

## 1. 프로젝트 요약
- **작업명**: 클렌징 로직 고도화 (노트북LM 및 이스케이프 패턴 대응)
- **목표**: AI 서비스 호출 없이도 노트북LM 특유의 노이즈(역슬래시, 각주)를 로컬에서 완벽히 제거.
- **기간**: 2026-02-08

## 2. 주요 성과
- **패턴 커버리지 확대**: 
    - 마크다운 이스케이프(`\**`, `\*`) 제거 로직 추가.
    - 변형된 각주 마커(` [1, 2]`) 제거 로직 강화.
- **무결성 확보**: 
    - 로직 처리 순서를 최적화(Unescape -> Cleansing)하여 복합적인 노이즈도 한 번에 처리 가능.
- **사용자 경험 극대화**: 
    - 이제 대부분의 AI 도구 출력물을 **Fast (Local)** 모드만으로도 깨끗하게 정리할 수 있음.

## 3. 기술적 구현 내용
- **`services/localCleansingService.ts`**:
    - `UNESCAPE_REGEX`: `/\(?=[*#_\[\]])/g` 적용.
    - `FOOTNOTE_MARKER_REGEX`: `/\s?\[\d+(?:[\s,.-]*\d+)*\]/g` 로 강화.
    - 처리 로직을 `simplifyFormatting` 옵션 내에 통합하여 일관성 유지.

## 4. 최종 확인
- `노트북LM_before.txt`를 이용한 검증 테스트 통과.
- `perplexity답변_before.txt`를 이용한 회귀 테스트 통과.

## 5. 향후 과제
- 사용자가 직접 커스텀 Regex를 추가할 수 있는 고급 설정 기능 검토 가능.
