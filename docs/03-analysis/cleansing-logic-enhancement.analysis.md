# [Analysis] 클렌징 로직 고도화 (Cleansing Logic Enhancement)

## 1. 개요 (Overview)
- **대상**: 노트북LM의 역슬래시 이스케이프 패턴 및 변형된 각주 패턴 대응.
- **분석일**: 2026-02-08

## 2. 설계 대비 구현 현황 (Design vs. Implementation)

| 항목 | 설계 내용 | 구현 현황 | 일치 여부 |
| :--- | :--- | :--- | :---: |
| 역슬래시 제거 | `UNESCAPE_REGEX`를 통한 `\**` 등의 이스케이프 제거 | 구현 완료 및 최우선 순위 적용 | ✅ |
| 각주 패턴 강화 | 앞 공백을 포함한 각주 마커 제거 | `FOOTNOTE_MARKER_REGEX` 고도화 완료 | ✅ |
| 처리 순서 조정 | 역슬래시 제거 후 패턴 매칭 수행 | 설계보다 더 견고하게 구현됨 | ✅ |

## 3. 테스트 결과 (Test Results)
- **노트북LM 사례**:
    - `\*\*` -> `**` (이스케이프 제거 완료)
    - `\[1, 2\]` -> (각주 마커 완벽 제거 완료)
    - `[blog.naver](...)` -> (인용 링크 제거 완료)
- **회귀 테스트**: 기존 Perplexity 사례에 대해서도 동일한 성능 유지 확인.

## 4. Gap 분석 결과
- **일치율 (Match Rate)**: 100%
- **특이사항**: 역슬래시가 포함된 마커의 경우 순서가 중요함을 발견하여, 역슬래시 제거 로직을 가장 먼저 수행하도록 조정함.

## 5. 결론
- 로컬 클렌징 로직이 더욱 견고해졌으며, 노트북LM 등 특수한 출력을 가진 도구들에 대해서도 AI 없이 즉각적인 클렌징이 가능해짐.
